/*
Three r88
来自QQ群 117844722 的群友 Too 的分享
请搭配 weapp-adapter 使用
使用方法:
require('./weapp-adapter')
const THREE = require('./path/three.js')
*/
'use strict';Object.defineProperty(exports,'__esModule',{value:!0});var THREE={name:'three'};exports.default=THREE,function(No){function Fo(){}function Go(Eg,bg){this.x=Eg||0,this.y=bg||0}function Ho(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],0<arguments.length&&console.error('THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.')}function Vo(Eg,bg,Tg,Sg){this._x=Eg||0,this._y=bg||0,this._z=Tg||0,this._w=void 0===Sg?1:Sg}function Wo(Eg,bg,Tg){this.x=Eg||0,this.y=bg||0,this.z=Tg||0}function Xo(){this.elements=[1,0,0,0,1,0,0,0,1],0<arguments.length&&console.error('THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.')}function jo(Eg,bg,Tg,Sg,Mg,Ag,wg,Rg,Lg,Pg){Object.defineProperty(this,'id',{value:Uu++}),this.uuid=Iu.generateUUID(),this.name='',this.image=void 0===Eg?jo.DEFAULT_IMAGE:Eg,this.mipmaps=[],this.mapping=void 0===bg?jo.DEFAULT_MAPPING:bg,this.wrapS=void 0===Tg?Nm:Tg,this.wrapT=void 0===Sg?Nm:Sg,this.magFilter=void 0===Mg?Hm:Mg,this.minFilter=void 0===Ag?Vm:Ag,this.anisotropy=void 0===Lg?1:Lg,this.format=void 0===wg?au:wg,this.type=void 0===Rg?Wm:Rg,this.offset=new Go(0,0),this.repeat=new Go(1,1),this.center=new Go(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Xo,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0===Pg?Tu:Pg,this.version=0,this.onUpdate=null}function Yo(Eg,bg,Tg,Sg){this.x=Eg||0,this.y=bg||0,this.z=Tg||0,this.w=void 0===Sg?1:Sg}function qo(Eg,bg,Tg){this.uuid=Iu.generateUUID(),this.width=Eg,this.height=bg,this.scissor=new Yo(0,0,Eg,bg),this.scissorTest=!1,this.viewport=new Yo(0,0,Eg,bg),void 0===(Tg=Tg||{}).minFilter&&(Tg.minFilter=Hm),this.texture=new jo(void 0,void 0,Tg.wrapS,Tg.wrapT,Tg.magFilter,Tg.minFilter,Tg.format,Tg.type,Tg.anisotropy,Tg.encoding),this.depthBuffer=void 0===Tg.depthBuffer||Tg.depthBuffer,this.stencilBuffer=void 0===Tg.stencilBuffer||Tg.stencilBuffer,this.depthTexture=void 0===Tg.depthTexture?null:Tg.depthTexture}function Zo(Eg,bg,Tg){qo.call(this,Eg,bg,Tg),this.activeCubeFace=0,this.activeMipMapLevel=0}function Jo(Eg,bg,Tg,Sg,Mg,Ag,wg,Rg,Lg,Pg,Cg,Ig){jo.call(this,null,Ag,wg,Rg,Lg,Pg,Sg,Mg,Cg,Ig),this.image={data:Eg,width:bg,height:Tg},this.magFilter=void 0===Lg?Fm:Lg,this.minFilter=void 0===Pg?Fm:Pg,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function Qo(Eg,bg,Tg,Sg,Mg,Ag,wg,Rg,Lg,Pg){jo.call(this,Eg=void 0===Eg?[]:Eg,bg=void 0===bg?wm:bg,Tg,Sg,Mg,Ag,wg,Rg,Lg,Pg),this.flipY=!1}function Ko(){this.seq=[],this.map={}}function $o(Eg,bg,Tg){var Sg=Eg[0];if(0>=Sg||0<Sg)return Eg;var Mg=bg*Tg,Ag=Bu[Mg];if(void 0===Ag&&(Ag=new Float32Array(Mg),Bu[Mg]=Ag),0!==bg){Sg.toArray(Ag,0);for(var wg=1,Rg=0;wg!==bg;++wg)Rg+=Tg,Eg[wg].toArray(Ag,Rg)}return Ag}function es(Eg,bg){var Tg=Fu[bg];void 0===Tg&&(Tg=new Int32Array(bg),Fu[bg]=Tg);for(var Sg=0;Sg!==bg;++Sg)Tg[Sg]=Eg.allocTextureUnit();return Tg}function ts(Eg,bg){Eg.uniform1f(this.addr,bg)}function rs(Eg,bg){Eg.uniform1i(this.addr,bg)}function as(Eg,bg){void 0===bg.x?Eg.uniform2fv(this.addr,bg):Eg.uniform2f(this.addr,bg.x,bg.y)}function is(Eg,bg){void 0===bg.x?void 0===bg.r?Eg.uniform3fv(this.addr,bg):Eg.uniform3f(this.addr,bg.r,bg.g,bg.b):Eg.uniform3f(this.addr,bg.x,bg.y,bg.z)}function os(Eg,bg){void 0===bg.x?Eg.uniform4fv(this.addr,bg):Eg.uniform4f(this.addr,bg.x,bg.y,bg.z,bg.w)}function ns(Eg,bg){Eg.uniformMatrix2fv(this.addr,!1,bg.elements||bg)}function ss(Eg,bg){void 0===bg.elements?Eg.uniformMatrix3fv(this.addr,!1,bg):(Gu.set(bg.elements),Eg.uniformMatrix3fv(this.addr,!1,Gu))}function ls(Eg,bg){void 0===bg.elements?Eg.uniformMatrix4fv(this.addr,!1,bg):(zu.set(bg.elements),Eg.uniformMatrix4fv(this.addr,!1,zu))}function ds(Eg,bg,Tg){var Sg=Tg.allocTextureUnit();Eg.uniform1i(this.addr,Sg),Tg.setTexture2D(bg||Du,Sg)}function ps(Eg,bg,Tg){var Sg=Tg.allocTextureUnit();Eg.uniform1i(this.addr,Sg),Tg.setTextureCube(bg||Nu,Sg)}function cs(Eg,bg){Eg.uniform2iv(this.addr,bg)}function ms(Eg,bg){Eg.uniform3iv(this.addr,bg)}function us(Eg,bg){Eg.uniform4iv(this.addr,bg)}function gs(Eg,bg){Eg.uniform1fv(this.addr,bg)}function fs(Eg,bg){Eg.uniform1iv(this.addr,bg)}function hs(Eg,bg){Eg.uniform2fv(this.addr,$o(bg,this.size,2))}function ys(Eg,bg){Eg.uniform3fv(this.addr,$o(bg,this.size,3))}function xs(Eg,bg){Eg.uniform4fv(this.addr,$o(bg,this.size,4))}function vs(Eg,bg){Eg.uniformMatrix2fv(this.addr,!1,$o(bg,this.size,4))}function _s(Eg,bg){Eg.uniformMatrix3fv(this.addr,!1,$o(bg,this.size,9))}function Es(Eg,bg){Eg.uniformMatrix4fv(this.addr,!1,$o(bg,this.size,16))}function bs(Eg,bg,Tg){var Sg=bg.length,Mg=es(Tg,Sg);Eg.uniform1iv(this.addr,Mg);for(var Ag=0;Ag!==Sg;++Ag)Tg.setTexture2D(bg[Ag]||Du,Mg[Ag])}function Ts(Eg,bg,Tg){var Sg=bg.length,Mg=es(Tg,Sg);Eg.uniform1iv(this.addr,Mg);for(var Ag=0;Ag!==Sg;++Ag)Tg.setTextureCube(bg[Ag]||Nu,Mg[Ag])}function Ss(Eg,bg,Tg){this.id=Eg,this.addr=Tg,this.setValue=function(Sg){return 5126===Sg?ts:35664===Sg?as:35665===Sg?is:35666===Sg?os:35674===Sg?ns:35675===Sg?ss:35676===Sg?ls:35678===Sg||36198===Sg?ds:35680===Sg?ps:5124===Sg||35670===Sg?rs:35667===Sg||35671===Sg?cs:35668===Sg||35672===Sg?ms:35669===Sg||35673===Sg?us:void 0}(bg.type)}function Ms(Eg,bg,Tg){this.id=Eg,this.addr=Tg,this.size=bg.size,this.setValue=function(Sg){return 5126===Sg?gs:35664===Sg?hs:35665===Sg?ys:35666===Sg?xs:35674===Sg?vs:35675===Sg?_s:35676===Sg?Es:35678===Sg?bs:35680===Sg?Ts:5124===Sg||35670===Sg?fs:35667===Sg||35671===Sg?cs:35668===Sg||35672===Sg?ms:35669===Sg||35673===Sg?us:void 0}(bg.type)}function As(Eg){this.id=Eg,Ko.call(this)}function ws(Eg,bg){Eg.seq.push(bg),Eg.map[bg.id]=bg}function Rs(Eg,bg,Tg){var Sg=Eg.name,Mg=Sg.length;for(Hu.lastIndex=0;;){var Ag=Hu.exec(Sg),wg=Hu.lastIndex,Rg=Ag[1],Lg=']'===Ag[2],Pg=Ag[3];if(Lg&&(Rg|=0),void 0===Pg||'['===Pg&&wg+2===Mg){ws(Tg,void 0===Pg?new Ss(Rg,Eg,bg):new Ms(Rg,Eg,bg));break}
